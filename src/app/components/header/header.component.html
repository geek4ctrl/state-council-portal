<header class="header">
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="container">
      <div class="top-bar-content">
        <div class="contact-info">
          <span class="contact-item">
            <app-icon name="phone" [size]="16"></app-icon>
            {{ 'header.contact.phone' | i18n }}
          </span>
          <span class="contact-item">
            <app-icon name="clock" [size]="16"></app-icon>
            {{ 'header.contact.hours' | i18n }}
          </span>
        </div>
        <div class="top-actions">
          <div class="social-links">
            <a href="#" [attr.aria-label]="'header.social.facebook' | i18n" class="social-link">
              <app-icon name="facebook" [size]="18" fill="currentColor" stroke="none"></app-icon>
            </a>
            <a href="#" [attr.aria-label]="'header.social.twitter' | i18n" class="social-link">
              <app-icon name="twitter" [size]="18" fill="currentColor" stroke="none"></app-icon>
            </a>
            <a href="#" [attr.aria-label]="'header.social.instagram' | i18n" class="social-link">
              <app-icon name="instagram" [size]="18" fill="currentColor" stroke="none"></app-icon>
            </a>
          </div>
          <div class="lang-toggle" role="group" [attr.aria-label]="'header.lang.label' | i18n">
            <button
              type="button"
              class="lang-btn"
              [class.active]="activeLang() === 'en'"
              [attr.aria-pressed]="activeLang() === 'en'"
              [attr.aria-label]="'header.lang.switchToEnglish' | i18n"
              (click)="setLanguage('en')">
              EN
            </button>
            <button
              type="button"
              class="lang-btn"
              [class.active]="activeLang() === 'fr'"
              [attr.aria-pressed]="activeLang() === 'fr'"
              [attr.aria-label]="'header.lang.switchToFrench' | i18n"
              (click)="setLanguage('fr')">
              FR
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="main-nav">
    <div class="container">
      <div class="nav-content">
        <!-- Logo -->
        <a href="/" class="logo" (click)="closeMobileMenu()">
          <img src="assets/logo.png" alt="Conseil d'Etat Logo" class="logo-image" fetchpriority="high">
        </a>

        <!-- Hamburger Menu Button -->
        <button class="hamburger" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen()" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <div
          class="menu-backdrop"
          [class.visible]="isMobileMenuOpen()"
          (click)="closeMobileMenu()"
          aria-hidden="true">
        </div>

        <!-- Navigation Menu -->
        <ul class="nav-menu" [class.mobile-open]="isMobileMenuOpen()">
          <li class="drawer-header mobile-only">
            <button class="drawer-close" type="button" (click)="closeMobileMenu()" aria-label="Close menu">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 6l12 12" />
                <path d="M18 6l-12 12" />
              </svg>
            </button>
          </li>
          <li class="nav-item">
            <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link" (click)="closeMobileMenu()" appPreloadOnHover="/">
              {{ 'header.nav.home' | i18n }}
            </a>
          </li>
          <li class="nav-item dropdown">
            <button
              class="nav-link dropdown-toggle"
              (click)="toggleCourtDropdown()"
              [class.active]="isCourtDropdownOpen()">
              {{ 'header.nav.court' | i18n }}
              <app-icon name="chevron-down" [size]="16" [customClass]="isCourtDropdownOpen() ? 'rotated' : ''"></app-icon>
            </button>
            @if (isCourtDropdownOpen()) {
              <ul class="dropdown-menu">
                <li><a routerLink="/presentation" class="dropdown-link" (click)="closeMobileMenu()" appPreloadOnHover="/presentation">{{ 'header.nav.presentation' | i18n }}</a></li>
                <li><a routerLink="/organization" class="dropdown-link" (click)="closeMobileMenu()" appPreloadOnHover="/organization">{{ 'header.nav.organization' | i18n }}</a></li>
                <li><a routerLink="/reforms" class="dropdown-link" (click)="closeMobileMenu()" appPreloadOnHover="/reforms">{{ 'header.nav.reforms' | i18n }}</a></li>
                <li><a routerLink="/international-relations" class="dropdown-link" (click)="closeMobileMenu()" appPreloadOnHover="/international-relations">{{ 'header.nav.international' | i18n }}</a></li>
              </ul>
            }
          </li>
          <li class="nav-item">
            <a routerLink="/audiences" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()" appPreloadOnHover="/audiences">
              {{ 'header.nav.audiences' | i18n }}
            </a>
          </li>

          <!-- STEPS now just a link, no dropdown -->
          <li class="nav-item">
            <a routerLink="/steps" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
              {{ 'header.nav.steps' | i18n }}
            </a>
          </li>

          <li class="nav-item">
            <a routerLink="/news" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()" appPreloadOnHover="/news">
              {{ 'header.nav.news' | i18n }}
            </a>
          </li>
          <li class="nav-item mobile-only">
            <button class="btn-appointment mobile" (click)="navigateToAppointment()">
              {{ 'header.nav.bookAppointment' | i18n }}
            </button>
          </li>
        </ul>

        <!-- Book Appointment Button (Desktop Only) -->
        <button class="btn-appointment desktop-only" (click)="navigateToAppointment()">
          {{ 'header.nav.bookAppointment' | i18n }}
        </button>
      </div>
    </div>
  </nav>
</header>
